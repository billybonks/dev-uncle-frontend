<Iftt as |IFTT|>
  {{#if IFTT.eventPicker}}
    <td class="automation-title-container">
      <BasicDropdown as |Dropdown|>
        <Dropdown.trigger>
          <h4 class="automation-title">
            {{@rule.event}} {{fa-icon "caret-down"}}
          </h4>
        </Dropdown.trigger>
        <Dropdown.content>
          {{#each (object-keys @eventsHash) as |event|}}
            <div class="automation-text-select">
              <h4 class="automation-title" role="button" {{action (mut @rule.event) event}}>
                {{event}}
              </h4>
            </div>
          {{/each}}
        </Dropdown.content>
      </BasicDropdown>
    </td>
  {{/if}}
  {{#if (and IFTT.action @rule.event)}}
    {{#let (better-get @eventsHash @rule.event) as |eventDetails|}}
      {{#let (find-by eventDetails.actions "key" @rule.rules.action) as |selectedAction|}}
        <PowerSelectBlockless
          @options={{eventDetails.actions}}
          @selected={{selectedAction}}
          @labelPath="label"
          @onchange={{action "actionSelected"}}
          class="ember-basic-dropdown"
        />
        {{component selectedAction.editor target=@target onUpdated=(action "onDataUpdated") data=@rule.rules.data}}
      {{/let}}
    {{/let}}
  {{/if}}
  {{#if (and @rule.event IFTT.comparator)}}
    {{#each @rule.conditions as |condition|}}
      <Comparator
        @properties={{object-keys @properties}}
        @propertyDetails={{@properties}}
        @comparatorLayout="workflow-comparator-template"
        @property={{condition.property}}
        @comparator={{condition.comparator}}
        @onPropertyChange={{action (mut condition.property)}}
        @onComparatorChange={{action (mut condition.comparator)}}
      as |comparator|>
        {{condition.value}}
        {{#if (eq condition.comparator.component 'text') }}
          <input value={{condition.value}} onchange={{action (mut condition.value) value="target.value"}}>
        {{/if}}
        {{#if (eq condition.comparator.component 'association') }}
          association
        {{/if}}
        {{!-- <ConditionEditor
          @selected={{condition.value}}
          @onchange=
        /> --}}
      </Comparator>
    {{/each}}
  {{/if}}
</Iftt>
